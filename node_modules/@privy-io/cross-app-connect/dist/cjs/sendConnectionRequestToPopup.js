"use strict";var e=require("./crypto.js"),r=require("./triggerPopup.js");require("@noble/curves/secp256k1"),require("@scure/base"),require("buffer"),require("fflate"),exports.sendConnectionRequestToPopup=async function({providerAppId:s,providerUrl:a,connectionOpts:t}){let i=new URL(`${a}/cross-app/connect`),{privateKey:c,publicKey:p}=e.generateKeyPair();i.searchParams.set("requester_public_key",p),i.searchParams.set("connect","true"),i.searchParams.set("provider_app_id",s),i.searchParams.set("requester_origin",window.location.origin),i.searchParams.set("smart_wallet_mode",t?.smartWalletMode?"true":"false");let{address:o,providerPublicKey:u,exp:n}=await r.triggerPopup(i);return{address:o,sharedSecret:e.recoverSharedSecret({privateKey:c,publicKey:u}),publicKey:p,exp:n}};
